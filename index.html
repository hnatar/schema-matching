<html>
  <head>
    <title>Schema Matching - View Database</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="jquery.js"></script>
  </head>
  <body>
      <header>
          Schema Matching
      </header>
      <div class="flex-row" style="flex-wrap: nowrap;">
          <div class="half-width">
              <p>&nbsp;</p>
              <small style="font-size: 0.6rem; text-shadow: 0px 1px #050505; color: #666; text-transform: uppercase; letter-spacing: 0.1rem;"><center>(please place text models in subdirectory to have them show up)</center></small>
              <!--- AJAX calls place data inside this div -->
              <div id="content"></div>
          </div>
          <div class="half-width">
              <div class="flex-row">
                  <button><span>Test</span></button>
                  <button><span>Test</span></button>
                  <button><span>Test</span></button>
              </div>
              <div class="text-area">
                  <pre id="console">Console:</pre>
              </div>
          </div>
      </div>
      <script type="text/javascript">
          $( () => {
              function log(msg) {
                  $("#console").html( $("#console").html() + '\n' + msg )
                  document.getElementById('console').scrollIntoView(false);
              }
              $("#content").on( 'click', 'a', function(e) {
                  e.preventDefault()
                  let Path = $(this).attr('data-path')
                  let Msg = `Adding ${Path} to similarity matching.`
                  log(Msg)
              })
              function query_mongo() {
                  let Field = $('#text_field1').val()
                  let Col = $('#text_col1').val()
                  let DB = $('#text_db1').val()
                  $.get(`http://localhost:4000/fetch/${DB}/${Col}/${Field}`, (data) => {
                      $('#content').html(data)
                  })
              }

              $('#text_db1').on('input', query_mongo)
              $('#text_col1').on('input', query_mongo)
              $('#text_field1').on('input', query_mongo)

              $.get(`http://localhost:4000/models`, (data) => {
                  $('#content').html(data)
              })
              log("--------")
          })
      </script>
  </body>
</html>
